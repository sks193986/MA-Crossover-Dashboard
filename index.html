<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My 17 Investment Portfolio Dashboard</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="dashboard-container">
        <!-- Header -->
        <header class="dashboard-header">
            <h1>📊 My Investment Portfolio</h1>
            <div class="header-info">
                <div class="portfolio-summary">
                    <span class="summary-item">
                        <span class="summary-number" id="total-investments">17</span>
                        <span class="summary-label">Investments</span>
                    </span>
                    <span class="summary-item success">
                        <span class="summary-number" id="above-ma">0</span>
                        <span class="summary-label">Above MA</span>
                    </span>
                    <span class="summary-item error">  
                        <span class="summary-number" id="below-ma">0</span>
                        <span class="summary-label">Below MA</span>
                    </span>
                </div>
                <button class="settings-btn" onclick="toggleSettings()">⚙️ Settings</button>
            </div>
        </header>

        <!-- API Status & Quick Start -->
        <div class="status-panel">
            <div class="status-info">
                <div class="status-item">
                    <span class="status-icon">✅</span>
                    <span class="status-text">API Connected - Ready to monitor your 17 investments</span>
                </div>
                <div class="status-item">
                    <span class="status-icon">🎯</span>
                    <span class="status-text" id="api-usage">API Usage: 0/500 requests today</span>
                </div>
            </div>
            <button class="btn-main" onclick="checkAllInvestments()">🔄 Check All My Investments</button>
        </div>

        <!-- Quick Start Guide -->
        <div class="guide-panel">
            <h3>🚀 Your Portfolio is Pre-loaded and Ready!</h3>
            <p><strong>Your 17 investments are already added:</strong> VOO, VEA, VTI, EWJ, VWO, HMEM, RIO, LCCN, BTCUSD, ETHUSD, SOLUSD, XRPUSD, SSLV, SGLP, GBPUSD, GBPINR, USDINR</p>
            <p><strong>Next step:</strong> Click "Check All My Investments" above to get current prices and start monitoring for 50-day MA crossovers!</p>
        </div>

        <!-- Investment Portfolio Table -->
        <section class="portfolio-section">
            <div class="section-header">
                <h2>📈 My 17 Investment Portfolio</h2>
                <div class="portfolio-controls">
                    <button onclick="exportData()" class="btn-secondary">📊 Export Data</button>
                    <button onclick="refreshDisplay()" class="btn-secondary">🔄 Refresh Display</button>
                </div>
            </div>

            <div class="portfolio-table-container">
                <table class="portfolio-table">
                    <thead>
                        <tr>
                            <th onclick="sortTable('symbol')" class="sortable"># Symbol ↕️</th>
                            <th onclick="sortTable('name')" class="sortable">Investment Name ↕️</th>
                            <th onclick="sortTable('type')" class="sortable">Type ↕️</th>
                            <th onclick="sortTable('currentPrice')" class="sortable">Current Price ↕️</th>
                            <th onclick="sortTable('ma50')" class="sortable">50-day MA ↕️</th>
                            <th>Position vs MA</th>
                            <th>Distance from MA</th>
                            <th>Last Alert</th>
                        </tr>
                    </thead>
                    <tbody id="portfolio-tbody">
                        <tr>
                            <td colspan="8" style="text-align: center; padding: 40px; opacity: 0.7;">
                                <div style="font-size: 1.1em; margin-bottom: 10px;">📊 Your 17 investments are loaded!</div>
                                <div>Click "Check All My Investments" above to get current prices and MA data</div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- MA Crossover Alerts -->
        <section class="alerts-section">
            <h2>🚨 50-Day MA Crossover Alerts</h2>
            <div class="alerts-filters">
                <button class="filter-btn active" onclick="filterAlerts('all')">All Alerts</button>
                <button class="filter-btn" onclick="filterAlerts('bullish')">🟢 Bullish Crossovers</button>
                <button class="filter-btn" onclick="filterAlerts('bearish')">🔴 Bearish Crossovers</button>
                <button class="filter-btn" onclick="filterAlerts('today')">📅 Today's Alerts</button>
            </div>
            <div class="alerts-list" id="alerts-list">
                <div style="text-align: center; opacity: 0.6; padding: 30px;">
                    <div style="font-size: 1.1em; margin-bottom: 8px;">No alerts yet</div>
                    <div>Once you check your portfolio, you'll see MA crossover alerts here!</div>
                </div>
            </div>
        </section>

        <!-- Settings Panel -->
        <section class="settings-section" id="settings-panel" style="display: none;">
            <h2>⚙️ Dashboard Settings</h2>
            <div class="settings-content">
                <div class="setting-group">
                    <h4>✅ API Connection Status</h4>
                    <div class="connection-status">
                        <div class="status-good">Connected to Alpha Vantage</div>
                        <div class="api-key-display">API Key: KKV2RG...LLW1</div>
                        <small>You have 500 free API requests per day. Checking 17 investments twice daily uses about 34 requests.</small>
                    </div>
                </div>

                <div class="setting-group">
                    <h4>📅 Monitoring Schedule</h4>
                    <select id="monitoring-frequency">
                        <option value="twice-daily">Twice Daily - Market Open & Close (Recommended)</option>
                        <option value="daily">Once Daily - Market Close Only</option>
                        <option value="manual">Manual Only - No Automatic Checking</option>
                    </select>
                    <small>Twice-daily monitoring catches all important MA crossovers while staying within free API limits.</small>
                </div>

                <div class="setting-group">
                    <h4>🔔 Alert Settings</h4>
                    <div class="checkbox-group">
                        <label><input type="checkbox" id="browser-alerts" checked> Browser Notifications for MA Crossovers</label>
                        <label><input type="checkbox" id="sound-alerts"> Sound Alerts (Coming Soon)</label>
                        <label><input type="checkbox" id="email-alerts"> Email Alerts (Coming Soon)</label>
                    </div>
                </div>

                <div class="setting-group">
                    <h4>📊 Your Investment Portfolio</h4>
                    <div class="portfolio-breakdown">
                        <div class="breakdown-item">🏢 <strong>ETFs:</strong> VOO, VEA, VTI, EWJ, VWO, HMEM, SSLV (7 investments)</div>
                        <div class="breakdown-item">📈 <strong>Stocks:</strong> RIO, LCCN, SGLP (3 investments)</div>
                        <div class="breakdown-item">₿ <strong>Crypto:</strong> BTCUSD, ETHUSD, SOLUSD, XRPUSD (4 investments)</div>
                        <div class="breakdown-item">💱 <strong>Forex:</strong> GBPUSD, GBPINR, USDINR (3 investments)</div>
                    </div>
                </div>
            </div>

            <div class="settings-actions">
                <button onclick="saveSettings()" class="btn-primary">💾 Save Settings</button>
                <button onclick="requestNotificationPermission()" class="btn-secondary">🔔 Enable Notifications</button>
                <button onclick="testAlert()" class="btn-secondary">🧪 Test Alert</button>
                <button onclick="toggleSettings()" class="btn-close">❌ Close</button>
            </div>
        </section>
    </div>

    <script src="script.js"></script>
</body>
</html>
